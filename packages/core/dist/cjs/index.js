!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["@fragment/core"]=e():t["@fragment/core"]=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=17)}([function(t,e){t.exports=function(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}},function(t,e){var n=0;t.exports=function(t){return"__private_"+n+++"_"+t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(11),o=n(7);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e,n){var r=n(12);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var r=n(13);function o(e,n,i){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=o=Reflect.get:t.exports=o=function(t,e,n){var o=r(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}},o(e,n,i||e)}t.exports=o},function(t,e,n){var r=n(14),o=n(15),i=n(16);t.exports=function(t,e){return r(t)||o(t,e)||i()}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=n(4);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){"use strict";n.r(e);var r=n(2),o=n.n(r),i=n(3),u=n.n(i),a=n(0),c=n.n(a),s=n(1),f=n.n(s),l=n(5),p=n.n(l),h=n(4),v=n.n(h),y=n(7),d=n.n(y),b=n(6),g=n.n(b),m=function(t){return!t.once},S=function(t){return function(e){var n=e.handler,r=e.scope;return n.apply(r,t)}},O=function(t){var e=function(t){function e(){var t,r;o()(this,e);for(var i=arguments.length,u=new Array(i),a=0;a<i;a++)u[a]=arguments[a];return r=p()(this,(t=v()(e)).call.apply(t,[this].concat(u))),Object.defineProperty(d()(r),n,{writable:!0,value:{}}),r}return g()(e,t),u()(e,[{key:"getEvtHandlers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"subscribe";return this.events[t]||[]}},{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.scope,o=void 0===r?null:r,i=n.once,u=void 0!==i&&i;return e?(this.handler={evtName:t,data:{handler:e,scope:o,once:u}},this):this}},{key:"off",value:function(t,e){var n,r=this.getEvtHandlers(t).filter((n=e,function(t){return t.handler!==n}));return this.handlers={evtName:t,handlers:r}}},{key:"trigger",value:function(t){var e=this.getEvtHandlers(t);this.handlers={evtName:t,handlers:e.filter(m)};for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e.forEach(S(r)),this}},{key:"subscribe",value:function(t,e){return this.on(void 0,t,e),this}},{key:"unsubscribe",value:function(t,e){return this.off(void 0,t,e),this}},{key:"emit",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.trigger.apply(this,[void 0].concat(e)),this}},{key:"events",get:function(){return c()(this,n)[n]}},{key:"handlers",set:function(t){var e=t.evtName,r=void 0===e?"subscribe":e,o=t.handlers,i=void 0===o?[]:o;return c()(this,n)[n][r]=i,this}},{key:"handler",set:function(t){var e=t.evtName,r=void 0===e?"subscribe":e,o=t.data;return this.handlers={evtName:r,handlers:this.getEvtHandlers(r)},c()(this,n)[n][r].push(o),this}}]),e}(t),n=f()("events");return e},w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o()(this,t),Object.defineProperty(this,x,{writable:!0,value:""}),Object.defineProperty(this,j,{writable:!0,value:{}}),Object.defineProperty(this,k,{writable:!0,value:{}}),Object.defineProperty(this,P,{writable:!0,value:{}});var n=e.namespace,r=void 0===n?"":n,i=e.state,u=void 0===i?{}:i;return c()(this,x)[x]=r||this.name,c()(this,j)[j]=c()(this,P)[P]=u,this}return u()(t,[{key:"boadcastState",value:function(){return this.emit({namespace:this.namespace,state:this.state}),this}},{key:"defaultState",value:function(){return c()(this,j)[j]}},{key:"get",value:function(t){var e=this.state[t];return void 0!==e?e:this.defaultState()[t]}},{key:"dispatch",value:function(t){var e=this,n=c()(this,k)[k][t];return n||(console.log(c()(this,x)[x]),console.log(c()(this,k)[k])),n||function(){return e.state}}},{key:"state",get:function(){return c()(this,P)[P]},set:function(t){return c()(this,P)[P]=t,this.boadcastState(),this}},{key:"namespace",get:function(){return c()(this,x)[x]}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.actionName,n=t.actionHandler;return c()(this,k)[k][e]=n,this}}]),t}(),x=f()("namespace"),j=f()("initState"),k=f()("actions"),P=f()("state"),_=O(w),D=n(8),E=n.n(D),A=n(9),N=n.n(A);function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(n,!0).forEach(function(e){E()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var H=function(t){function e(t){var n;return o()(this,e),n=p()(this,v()(e).call(this,C({namespace:"dataSrcColl"},t))),Object.defineProperty(d()(n),M,{writable:!0,value:{state:{},mock:!0}}),n}return g()(e,t),u()(e,[{key:"on",value:function(t){var n,r=this.getDataSource(t);r.mock||r.boadcastState();for(var o=arguments.length,i=new Array(o>1?o-1:0),u=1;u<o;u++)i[u-1]=arguments[u];return(n=N()(v()(e.prototype),"on",this)).call.apply(n,[this,t].concat(i)),this}},{key:"getDataSource",value:function(t){return this.state[t]||c()(this,M)[M]}},{key:"addDataSource",value:function(t,e){return this.removeDataSource(t),this.state=C({},this.state,E()({},t,e)),e.subscribe(this.proxyStateBroadcast,{scope:this}).boadcastState(),this}},{key:"removeDataSource",value:function(t){var e=this.getDataSource(t);return e.mock?this:(e.subscribe(this.proxyStateBroadcast),delete this.state[t],this)}},{key:"proxyStateBroadcast",value:function(t){var e=t.namespace;return this.trigger(e,t),this}}]),e}(_),M=f()("fallbackDataSource"),R=new H,B=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.subscriptions,r=void 0===n?[]:n;return function(t){function e(){return o()(this,e),p()(this,v()(e).apply(this,arguments))}return g()(e,t),u()(e,[{key:"handlStateChange",value:function(t){return this.onStateChange(t),this}},{key:"toggleSubs",value:function(t,e){return R[t](e,this.handlStateChange,{scope:this}),this}},{key:"subscribe",value:function(){var t=this;return r.map(function(e){return t.toggleSubs("on",e)}),this}},{key:"unsubscribe",value:function(){var t=this;return r=r.filter(function(e){return t.toggleSubs("off",e),!1}),this}},{key:"boadcast",value:function(t,e){var n=this;return r.map(function(r){return n.triggerAction(r,t,e)}),this}},{key:"triggerAction",value:function(t,e,n){return R.getDataSource(t).dispatch(e)(n),this}},{key:"getDataSourceState",value:function(t){return R.getDataSource(t).state}},{key:"getState",value:function(){var t=this;return r.reduce(function(e,n){return e[n]=t.getDataSourceState(n),e},{})}}]),e}(t)},I=n(10),$=n.n(I),q=function(t){var e=t.name;if(e)return e;var n=t.toString().match(/^(function\s+)?([\w\$]+)\s*(\()?/);return $()(n,1)[0].replace(/function|\s|\(/g,"")},z=function(t,e,n){return t.reduce(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=function(t){return n.state=e(n.state,{type:r,payload:t},n),n.state};return t.action={actionName:r,actionHandler:o},t},n)},F=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.namespace,r=void 0===n?q(t):n,o=e.actions,i=void 0===o?[]:o,u=e.StoreClass,a=void 0===u?_:u,c=e.state;if(!t)throw new Error("Reducer function must be supplied!");if(!r)throw new Error("The given namespace is invalid!");var s=new a({state:c,namespace:r});return R.addDataSource(r,s),z(i,t,s)};n.d(e,"Store",function(){return _}),n.d(e,"Provider",function(){return B}),n.d(e,"pubSubMixin",function(){return O}),n.d(e,"createStore",function(){return F})}])});
//# sourceMappingURL=index.js.map